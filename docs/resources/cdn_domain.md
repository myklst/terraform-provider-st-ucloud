---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "st-ucloud_cdn_domain Resource - st-ucloud"
subcategory: ""
description: |-
  This resource provides the configuration of acceleration domain
---

# st-ucloud_cdn_domain (Resource)

This resource provides the configuration of acceleration domain

## Example Usage

```terraform
resource "st-ucloud_cdn_domain" "test" {
  domain    = "test.example.com"
  test_url  = "http://origin.example.com/"
  area_code = "cn"
  cdn_type  = "web"

  origin_conf {
    origin_ip_list   = ["origin-ws-cn-7z8567axjz.sige-test3.com"]
    origin_host      = "example.com"
    origin_port      = 80
    origin_protocol  = "https"
    origin_follow301 = true
  }

  cache_conf {
    cache_rule {
      path_pattern       = "/"
      description        = "test"
      ttl                = 60
      cache_unit         = "sec"
      cache_behavior     = true
      follow_origin_rule = true
    }

    cache_rule {
      path_pattern       = ".*"
      description        = "test2"
      ttl                = 60
      cache_unit         = "sec"
      cache_behavior     = true
      follow_origin_rule = true
    }

    http_code_cache_rule {
      path_pattern       = ".*"
      description        = "test"
      ttl                = 60
      cache_unit         = "sec"
      cache_behavior     = true
      follow_origin_rule = true
      http_code          = 400
      use_regex          = false
    }

    http_code_cache_rule {
      path_pattern       = ".*"
      description        = "test"
      ttl                = 60
      cache_unit         = "sec"
      cache_behavior     = true
      follow_origin_rule = true
      http_code          = 401
      use_regex          = false
    }
  }

  access_control_conf = {
    enable_refer = false
    ip_blacklist = ["100.100.100.100", "4.4.4.4"]
    refer_conf = {
      null_refer = true
      refer_list = ["sige-test3.com"]
      refer_type = "blacklist"
    }
  }

  advanced_conf = {
    http_client_header_list = ["Test:test_client"]
    http_origin_header_list = ["Test:test_origin"]
    http_to_https           = false
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `area_code` (String) Acceleration area.`cn` represents China.`abroad` represents regions outside China.If the value is unset,domain is accelerated in all regions
- `cdn_type` (String) `web` for website service,`stream` for video service,`download` for download service
- `domain` (String) Acceleration domain
- `test_url` (String) Test url

### Optional

- `access_control_conf` (Attributes) The configuration of access control. (see [below for nested schema](#nestedatt--access_control_conf))
- `advanced_conf` (Attributes) The advance configuration. (see [below for nested schema](#nestedatt--advanced_conf))
- `cache_conf` (Block, Optional) The configuration of cache (see [below for nested schema](#nestedblock--cache_conf))
- `origin_conf` (Block, Optional) The configuration of origin (see [below for nested schema](#nestedblock--origin_conf))
- `tag` (String) The group of service.If the value is unset. `Default` is used as default value

### Read-Only

- `cname` (String) Cname
- `create_time` (Number) Create time.
- `domain_id` (String) Id of acceleration domain, generated by ucloud.
- `status` (String) Domain status

<a id="nestedatt--access_control_conf"></a>
### Nested Schema for `access_control_conf`

Optional:

- `ip_blacklist` (List of String) Request from address in blacklist will be denied.
- `refer_conf` (Attributes) (see [below for nested schema](#nestedatt--access_control_conf--refer_conf))

<a id="nestedatt--access_control_conf--refer_conf"></a>
### Nested Schema for `access_control_conf.refer_conf`

Optional:

- `null_refer` (Boolean) When `refer_type` is whitelist and `null_refer` is false,NULL refer requests are not allowed.
- `refer_list` (List of String) The anti-leech rule list
- `refer_type` (String) The type of anti-leech rules.If the value is 0,`refer_list` is whitelist,requests with these refers will be allowed.If the value is 1,`refer_list` is blacklist,requests with these refers will be denied.



<a id="nestedatt--advanced_conf"></a>
### Nested Schema for `advanced_conf`

Optional:

- `http_client_header_list` (List of String) Add http header when send response to client.
- `http_origin_header_list` (List of String) Add http header when send request to origin
- `http_to_https` (Boolean) If perform a forced conversion from http to https.


<a id="nestedblock--cache_conf"></a>
### Nested Schema for `cache_conf`

Optional:

- `cache_rule` (Block List) The list of cache rule (see [below for nested schema](#nestedblock--cache_conf--cache_rule))
- `http_code_cache_rule` (Block List) The list of http code cache rule (see [below for nested schema](#nestedblock--cache_conf--http_code_cache_rule))

<a id="nestedblock--cache_conf--cache_rule"></a>
### Nested Schema for `cache_conf.cache_rule`

Required:

- `path_pattern` (String) The pattern of path

Optional:

- `cache_behavior` (Boolean) If caching is enabled.The optional values are true and false.
- `cache_unit` (String) The unit of caching time.The optional values are `sec`,`min`,`hour` and `day`.
- `description` (String) The description of rule
- `follow_origin_rule` (Boolean) If follow caching instructions in http header from the origin.The optional values are true and false.
- `ttl` (Number) The cache time
- `use_regex` (Boolean) If use regex.Default is false


<a id="nestedblock--cache_conf--http_code_cache_rule"></a>
### Nested Schema for `cache_conf.http_code_cache_rule`

Required:

- `http_code` (Number) Http code,range from 200 to 600,200 and 206 are not allowed.

Optional:

- `cache_behavior` (Boolean) If caching is enabled.The optional values are true and false.
- `cache_unit` (String) The unit of caching time.The optional values are `sec`,`min`,`hour` and `day`.
- `description` (String) The description of rule
- `follow_origin_rule` (Boolean) If follow caching instructions in http header from the origin.The optional values are true and false.
- `path_pattern` (String) The pattern of path
- `ttl` (Number) The cache time
- `use_regex` (Boolean) If use regex.Default is false



<a id="nestedblock--origin_conf"></a>
### Nested Schema for `origin_conf`

Required:

- `origin_ip_list` (List of String) The ip list of origin

Optional:

- `origin_follow301` (Boolean) Whether redirect according to the url from origin.The optional values are true and false
- `origin_host` (String) The host of origin
- `origin_port` (Number) The service port of origin
- `origin_protocol` (String) The protocol of origin.The optional values are `http` and `https`
